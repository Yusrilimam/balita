{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>Edit User</h2>
    <form method="post">
        <div class="mb-3">
            <label>Username</label>
            <input type="text" name="username" class="form-control" value="{{ user.username }}" required>
        </div>
        <div class="mb-3">
            <label>Nama Lengkap</label>
            <input type="text" name="nama_lengkap" class="form-control" value="{{ user.nama_lengkap }}" required>
        </div>
        <div class="mb-3">
            <label>Password (kosongkan jika tidak ganti)</label>
            <div style="position:relative;">
                <input type="password" class="form-control" id="password" name="password" autocomplete="new-password">
                <span onclick="togglePassword()" style="position:absolute;right:15px;top:50%;transform:translateY(-50%);cursor:pointer;">
                    <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </span>
            </div>
        </div>
        <div class="mb-3">
            <label>Role</label>
            <select name="role" class="form-control" required>
                <option value="admin" {% if user.role=='admin' %}selected{% endif %}>Admin</option>
                <option value="user" {% if user.role=='user' %}selected{% endif %}>User</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Simpan</button>
        <a href="{{ url_for('kelola_user') }}" class="btn btn-secondary">Kembali</a>
    </form>
</div>
<script>
    function togglePassword() {
        const input = document.getElementById('password');
        const eye = document.getElementById('eyeIcon');
        if (input.type === "password") {
            input.type = "text";
            eye.innerHTML = `<path d="M17.94 17.94A10.47 10.47 0 0 1 12 19c-7 0-11-7-11-7a21.87 21.87 0 0 1 5.06-6.06M1 1l22 22" stroke="currentColor" stroke-width="2" fill="none"/>
                             <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2"/>`;
        } else {
            input.type = "password";
            eye.innerHTML = `<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z" fill="none" stroke="currentColor" stroke-width="2"/>
                             <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2"/>`;
        }
    }
</script>
{% endblock %}